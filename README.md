# 🎄 3D Gesture-Controlled Christmas Tree
# 基于手势控制的 3D 粒子圣诞树

本项目是一个基于 **Three.js** 和 **MediaPipe** 构建的互动 3D 网页应用。通过计算机视觉技术捕捉手势，实现对 3D 粒子系统的实时控制，将粒子在“圣诞树”与“星空”形态间自由切换，并支持照片墙的互动展示。

该代码最初由 AI 模型 (Gemini 3) 生成，主打电影感视觉效果与沉浸式交互体验。

---

## ✨ 项目亮点

* **🎨 奢华视觉风格**：采用哑光绿、香槟金与圣诞红为主色调，结合辉光（Bloom）与光晕效果，营造高级的节日氛围。
* **📱 全端完美适配**：**完美支持手机（iOS/Android）、iPad 及各类平板设备**。无论是在电脑大屏还是移动设备上，都能流畅体验。
* **🧩 3D 粒子系统**：由数千个球体、立方体、糖果手杖模型构成的动态粒子系统。
* **✋ 无接触交互**：完全通过摄像头捕捉手势进行控制，支持桌面端与移动端（需 HTTPS 环境）。
* **🖼️ 动态照片云**：支持上传或预设个人照片，照片会作为粒子的一部分悬浮在空中，并支持抓取放大查看。

---

## 📱 移动端与平板适配特别说明

针对移动设备（手机/iPad）进行了深度优化，确保在不同性能的设备上都能获得最佳体验：

1.  **🤳 自动前置摄像头**：在移动设备上运行时，代码会自动识别并调用**前置摄像头**，无需手动切换，方便自拍与互动。
2.  **🚀 性能自适应**：针对移动端的高像素摄像头进行了流处理优化（分辨率降级处理），在保证手势识别精准度的同时，**大幅降低发热与卡顿**，确保 3D 渲染流畅（60fps）。
3.  **🎵 触控音乐支持**：针对 iOS/Android 浏览器的自动播放策略，增加了**“任意点击/触摸屏幕播放音乐”**的交互逻辑，解决了移动端无法自动播放背景音乐的问题。
4.  **🔒 权限友好**：针对 iOS Safari 的严格权限策略进行了兼容性处理，确保摄像头权限弹窗能正常触发。

---

## 🎮 交互模式说明

本项目包含三种核心状态，通过手势或算法自动切换：

### 1. 🌲 合拢态 (Tree Mode)
**初始状态**。所有粒子元素（几何体、装饰物、照片）在屏幕中央收拢，聚合为一个旋转的 3D 圣诞树圆锥体。

### 2. ✨ 散开态 (Scatter Mode)
**星空效果**。所有粒子打破束缚，在 3D 空间中无序漂浮、散落，形成如同银河般的梦幻背景。照片会在此模式下随机旋转展示。

### 3. 🖼️ 聚焦态 (Focus Mode)
**照片详情**。在“散开态”的基础上，通过手势选中某一张照片，镜头将自动推进并聚焦于该照片，背景保持虚化与漂浮感。

---

## ✋ 手势操作指南

请确保设备拥有摄像头并授予网页访问权限。

| 手势 | 动作说明 (Action) | 功能反馈 (Function) |
| :--- | :--- | :--- |
| **✊ 握拳** | Fist | **聚拢**：粒子迅速汇聚，重组为圣诞树形态。 |
| **🖐️ 张开五指** | Open Palm | **散开**：粒子炸开，进入自由漂浮的星空模式。 |
| **👌 指尖捏合** | Pinch (拇指与食指) | **聚焦**：随机抓取或选中一张照片进行放大观看。 |
| **👋 手掌移动** | Hand Movement | **视角控制**：在散开模式下，根据手掌的位置改变 3D 场景的旋转视角。 |

---

## 🛠️ 安装与使用

### 方式一：快速体验 (仅上传照片)
1.  下载本仓库中的 `index.html` 文件。
2.  使用 Chrome 或 Edge 浏览器直接打开。
3.  点击界面上的 **"Add Memories"** 按钮上传本地照片。
4.  按下键盘 **H** 键可隐藏 UI 界面，享受沉浸式体验。

### 方式二：本地开发与部署 (推荐)
如果您希望修改默认照片、背景音乐，或**在手机/平板上体验**，请遵循以下步骤：

**1. 文件结构准备**
确保目录结构如下：
```text
Project/
├── index.html
├── ChristmasSong.mp3  (背景音乐)
└── photos/            (默认照片文件夹，请使用小写文件名)
    ├── 1.jpg
    ├── 2.jpg
    └── ...